name: Github Actions Build and Deploy Demo  # 构建文件名
on:                                       # 监听'哪个分支'的'哪个动作'
  push:                                     # 这里监听 main分支push动作
    branches:
      - master

jobs:                                     # 执行多个任务
  build-and-deploy:                       # job id
    runs-on: ubuntu-latest
    steps: 
      - name: Checkout
        uses: actions/checkout@master
        with: 
          persist-credentials: false

      - name: Install and Build
        run: |
          yarn install
          yarn build

      - name: Deploy
        uses:  JamesIves/github-pages-deploy-action@master # ⽤来部github page的action
        with: 
          ACCESS_TOKEN: ${{ secrets.ACESS_TOKEN }}  # github 的access token
          BRANCH: pages                     # 部署到哪个分支
          FOLDER: dist                      # 要进行部署的目录
